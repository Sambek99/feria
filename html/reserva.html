<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Pavo is a mobile app Tailwind CSS HTML template created to help you present benefits, features and information about mobile apps in order to convince visitors to download them" />
    <meta name="author" content="Your name" />

    <!-- OG Meta Tags to improve the way the post looks when you share the page on Facebook, Twitter, LinkedIn -->
    <meta property="og:site_name" content="" /> <!-- website name -->
    <meta property="og:site" content="" /> <!-- website link -->
    <meta property="og:title" content="" /> <!-- title shown in the actual shared post -->
    <meta property="og:description" content="" /> <!-- description shown in the actual shared post -->
    <meta property="og:image" content="" /> <!-- image link, make sure it's jpg -->
    <meta property="og:url" content="" /> <!-- where do you want your post to link to -->
    <meta name="twitter:card" content="summary_large_image" /> <!-- to have large image post format in Twitter -->

    <!-- Webpage Title -->
    <title>ClabCarpool ESPOL</title>

    <!-- Styles -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;0,700;1,400&display=swap"
        rel="stylesheet" />
    <link href="css/fontawesome-all.css" rel="stylesheet" />
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet" />
    <link href="css/swiper.css" rel="stylesheet" />
    <link href="css/magnific-popup.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
    <script src="../path/to/flowbite/dist/flowbite.min.js"></script>
</head>

<body>
    <header class="mt-5 mr-20 ml-20 mb-5">
        <nav class="bg-white border-gray-200 dark:bg-gray-900">
            <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
                <a href="#" class="flex items-center space-x-3 rtl:space-x-reverse">
                    <img src="/images/Logo Carpool.png" class="h-8" alt="ClabCarpool Logo" />
                    <span
                        class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">ClabCarpool</span>
                </a>
                <button data-collapse-toggle="navbar-default" type="button"
                    class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
                    aria-controls="navbar-default" aria-expanded="false">
                    <span class="sr-only">Open main menu</span>
                    <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 17 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M1 1h15M1 7h15M1 13h15" />
                    </svg>
                </button>
                <div class="hidden w-full md:block md:w-auto" id="navbar-default">
                    <ul
                        class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
                        <li>
                            <a href="dashboard.html"
                                class="block py-2 px-3 text-white bg-blue-700 rounded-sm md:bg-transparent md:text-blue-700 md:p-0 dark:text-white md:dark:text-blue-500"
                                aria-current="page">Dashboard</a>
                        </li>
                        <li>
                            <a href="#"
                                class="block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Historial</a>
                        </li>
                        <li>
                            <a href="#"
                                class="pointer-events-none block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Reservas</a>
                        </li>
                        <li>
                            <a href="datos.html"
                                class="block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Datos</a>
                        </li>
                        <li>
                            <a href="/index.html"
                                class="block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Log
                                out</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <p class="p-10 text-2xl font-bold">Reservas</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 p-6"> 
            <div
                class="bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 space-y-4 bg-white dark:bg-gray-800 p-4 rounded-2xl shadow">
                <div class="w-full max-w-3xl mx-auto rounded-lg overflow-hidden shadow-lg">
                    <iframe src="https://www.google.com/maps/embed?..." class="w-full h-40"></iframe>
                </div>
                <h2 id="nombre" class="text-xl font-bold text-gray-800 dark:text-white"></h2>
                <p id="telefono" class="text-gray-500 dark:text-gray-300"></p>
                <p id="cupos" class="text-gray-600 dark:text-gray-400">Cupos: <strong>${cupos}</strong></p>
            </div>
        </div>

    </header>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const nombre = localStorage.getItem("nombre");
            const telefono = localStorage.getItem("telefono");
            const localCupos = parseInt(localStorage.getItem("cupos"));

            const reservas = JSON.parse(localStorage.getItem("reservas")) || {};
            const reserva = reservas[nombre];

            const elNombre = document.getElementById("nombre");
            const elTelefono = document.getElementById("telefono");
            const elCupos = document.getElementById("cupos");
            const botonContainer = document.getElementById("boton-reserva-container");

            if (!nombre || !telefono || isNaN(localCupos)) {
                elNombre.textContent = "Información no disponible";
                return;
            }

            // Mostrar datos
            elNombre.textContent = nombre;
            elTelefono.textContent = "Número de teléfono: " + telefono;

            // Obtener cupos desde reserva o localStorage
            const cuposDisponibles = reserva?.cupos ?? localCupos;
            elCupos.textContent = cuposDisponibles;

            // Si ya reservó, no permitir más acciones
            if (reserva?.reservado) {
                const btn = document.createElement("button");
                btn.textContent = "Ya has reservado un cupo";
                btn.className = "bg-blue-300 text-white font-bold py-2 px-6 rounded mt-4 w-full cursor-not-allowed opacity-50";
                btn.disabled = true;
                botonContainer.appendChild(btn);
                return;
            }

            // Si no hay cupos
            if (cuposDisponibles <= 0) {
                const btn = document.createElement("button");
                btn.textContent = "No hay cupos disponibles";
                btn.className = "bg-gray-400 text-white font-bold py-2 px-6 rounded mt-4 w-full cursor-not-allowed opacity-50";
                btn.disabled = true;
                botonContainer.appendChild(btn);
                return;
            }

        });
    </script>

    <script src="/js/scripts.js"></script> <!-- Custom scripts -->
    <script src="../path/to/flowbite/dist/flowbite.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>

</body>

</html>